{% extends "base_generic.html" %}

{% block content %}
  <h1>Books</h1>
  {% if user.has_perm:"bookshelf.can_create" %}
    <a href="{% url 'book_create' %}" class="btn btn-primary">Add Book</a>
  {% endif %}
  
  <ul>
  {% for book in books %}
    <li>
      {{ book.title }} by {{ book.author }} ({{ book.publication_year }})
      {% if user.has_perm:"bookshelf.can_edit" %}
        <a href="{% url 'book_edit' book.pk %}">Edit</a>
      {% endif %}
      {% if user.has_perm:"bookshelf.can_delete" %}
        <a href="{% url 'book_delete' book.pk %}">Delete</a>
      {% endif %}
    </li>
  {% empty %}
    <li>No books available.</li>
  {% endfor %}
  </ul>
{% endblock %}
